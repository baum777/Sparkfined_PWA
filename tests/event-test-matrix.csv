event_id,test_case_id,type,description,setup_steps,input_fixture,expected_output_schema,run_command,estimated_runtime,priority,pass_criteria,mock_required,notes
events/analyze-bullets-ai,ABA-UNIT-001,unit,"aiAssist posts template payload","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/analyze-bullets-ai/sample-vars.json","{ ok: boolean, text: string }","pnpm vitest --run --testNamePattern=ABA-UNIT-001","short","P0","fetch called once with templateId","no","Validates basic template wiring"
events/analyze-bullets-ai,ABA-INTEG-010,integration,"Proxy mock returns bullets","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/analyze-bullets-ai/sample-vars.json","{ ok: true, text: string, provider: string }","pnpm vitest --run --testNamePattern=ABA-INTEG-010","short","P0","response.text contains Mocked bullet","yes","Uses tests/mocks/aiProxyMock.ts"
events/analyze-bullets-ai,ABA-SMOKE-020,smoke,"Hook stores AI response","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/analyze-bullets-ai/sample-vars.json","AssistResult","pnpm vitest --run --testNamePattern=ABA-SMOKE-020","short","P1","result.current.result.ok true","no","Render-hook smoke"
events/analyze-bullets-ai,ABA-E2E-040,e2e,"UI button triggers bullets toast","1. pnpm install; 2. pnpm playwright test","tests/fixtures/analyze-bullets-ai/sample-vars.json","UI toast rendered","pnpm playwright test --grep ABA-E2E-040","long","P1","toast visible within 30s","yes","Requires seeded dashboard"
events/analyze-bullets-ai,ABA-PERF-050,performance,"Mocked cache under 300ms","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/analyze-bullets-ai/sample-vars.json","AssistResult","pnpm vitest --run --testNamePattern=ABA-PERF-050","short","P1","elapsed < 300ms","no","Uses performance.now()"
events/analyze-bullets-ai,ABA-SEC-060,security,"Redacts emails before sending","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/analyze-bullets-ai/sample-vars.json","sanitized string","pnpm vitest --run --testNamePattern=ABA-SEC-060","short","P0","sanitized payload lacks email","no","Regex-based sanitation"
events/journal-condense-ai,JCA-UNIT-001,unit,"System/user prompts forwarded","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/journal-condense-ai/draft.json","{ system: string, user: string }","pnpm vitest --run --testNamePattern=JCA-UNIT-001","short","P0","body.system equals expected","no","Ensures prompt fidelity"
events/journal-condense-ai,JCA-INTEG-010,integration,"Proxy condense mocked","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/journal-condense-ai/draft.json","{ ok: true, text: string }","pnpm vitest --run --testNamePattern=JCA-INTEG-010","short","P0","text contains Kontext","yes","Uses tests/mocks/aiProxyMock.ts"
events/journal-condense-ai,JCA-SMOKE-020,smoke,"Hook run() stores summary","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/journal-condense-ai/draft.json","AssistResult","pnpm vitest --run --testNamePattern=JCA-SMOKE-020","short","P1","result text contains Kontext","no","Render-hook smoke"
events/journal-condense-ai,JCA-E2E-040,e2e,"Journal condense UI happy path","1. pnpm install; 2. pnpm playwright test","tests/fixtures/journal-condense-ai/draft.json","UI toast rendered","pnpm playwright test --grep JCA-E2E-040","long","P1","AI Verdichtung toast visible","yes","Requires seeded journal"
events/journal-condense-ai,JCA-PERF-050,performance,"Mock proxy <350ms","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/journal-condense-ai/draft.json","AssistResult","pnpm vitest --run --testNamePattern=JCA-PERF-050","short","P1","elapsed < 350ms","no","Latency guard"
events/journal-condense-ai,JCA-SEC-060,security,"Redacts phone numbers","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/journal-condense-ai/draft.json","sanitized string","pnpm vitest --run --testNamePattern=JCA-SEC-060","short","P0","payload contains [redacted-phone]","no","Regex-based sanitation"
events/teaser-vision-analysis,TVA-UNIT-001,unit,"Heuristic fallback returns teaser","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/teaser-vision-analysis/payload.json","AITeaserAnalysis","pnpm vitest --run --testNamePattern=TVA-UNIT-001","short","P1","provider equals heuristic","no","Ensures fallback path"
events/teaser-vision-analysis,TVA-INTEG-010,integration,"Mock OpenAI vision parses JSON","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/teaser-vision-analysis/payload.json","AITeaserAnalysis","pnpm vitest --run --testNamePattern=TVA-INTEG-010","medium","P1","sr_levels[0].label === S1","yes","Uses tests/mocks/openaiVisionMock.ts"
events/teaser-vision-analysis,TVA-SMOKE-020,smoke,"Missing key triggers heuristic","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/teaser-vision-analysis/payload.json","AITeaserAnalysis","pnpm vitest --run --testNamePattern=TVA-SMOKE-020","short","P2","provider downgraded to heuristic","no","Smoke guard for env"
events/teaser-vision-analysis,TVA-E2E-040,e2e,"Teaser UI shows analysis","1. pnpm install; 2. pnpm playwright test","tests/fixtures/teaser-vision-analysis/payload.json","UI section rendered","pnpm playwright test --grep TVA-E2E-040","long","P2","Teaser analysis text visible","yes","Needs mock vision server"
events/teaser-vision-analysis,TVA-PERF-050,performance,"Mocked vision <400ms","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/teaser-vision-analysis/payload.json","AITeaserAnalysis","pnpm vitest --run --testNamePattern=TVA-PERF-050","short","P2","elapsed < 400ms","no","Mocked OpenAI client"
events/teaser-vision-analysis,TVA-SEC-060,security,"Masks wallet address in logs","1. pnpm install; 2. pnpm vitest --run","tests/fixtures/teaser-vision-analysis/payload.json","sanitized string","pnpm vitest --run --testNamePattern=TVA-SEC-060","short","P1","loggable string uses wallet://REDACTED","no","Prevents leaking addresses"
