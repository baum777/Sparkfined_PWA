/**
 * High Contrast Mode
 * 
 * Enhances visibility for users with:
 * - Low vision
 * - Color blindness
 * - High ambient light conditions
 * 
 * Activated by:
 * - Windows High Contrast Mode
 * - prefers-contrast: high media query
 * - Manual toggle (future)
 * 
 * Features:
 * - Stronger borders and outlines
 * - Higher color contrast ratios
 * - Simplified color palette
 * - Bolder text weights
 */

/* === High Contrast Mode (Auto-detect) === */

@media (prefers-contrast: high) {
  :root {
    /* Stronger colors */
    --color-emerald: 0 255 0; /* Brighter green */
    --color-rose: 255 0 0; /* Pure red */
    --color-amber: 255 170 0; /* Brighter amber */
    --color-cyan: 0 255 255; /* Bright cyan */
    --color-bg: 0 0 0;
    --color-bg-elevated: 0 0 0;
    --color-surface: 12 12 12;
    --color-surface-subtle: 18 18 18;
    --color-surface-elevated: 24 24 24;
    --color-surface-hover: 38 38 38;
    
    /* Higher contrast text */
    --color-text-primary: 255 255 255;
    --color-text-secondary: 224 224 224;
    --color-text-tertiary: 204 204 204;
    
    /* Stronger borders */
    --color-border: 255 255 255;
    --color-border-secondary: 204 204 204;
  }
  
  /* === Borders === */
  
  * {
    /* Ensure all interactive elements have visible borders */
    border-width: 2px !important;
  }
  
  button,
  a,
  input,
  select,
  textarea,
  [role="button"] {
    border: 2px solid rgb(var(--color-border)) !important;
  }
  
  /* === Focus Indicators === */
  
  *:focus-visible {
    outline: 3px solid rgb(var(--color-emerald)) !important;
    outline-offset: 2px !important;
  }
  
  /* === Text === */
  
  body {
    font-weight: 500 !important;
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-weight: 700 !important;
  }
  
  /* === Interactive Elements === */
  
  button:hover,
  a:hover,
  [role="button"]:hover {
    background-color: rgb(var(--color-surface-hover)) !important;
    border-color: rgb(var(--color-emerald)) !important;
  }
  
  button:active,
  a:active,
  [role="button"]:active {
    background-color: rgb(var(--color-surface)) !important;
  }
  
  button:disabled,
  [disabled] {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
  }
  
  /* === Status Colors === */
  
  .text-brand,
  .text-success,
  .bg-brand {
    color: rgb(var(--color-emerald)) !important;
    background-color: transparent !important;
    border-color: rgb(var(--color-emerald)) !important;
  }
  
  .text-danger,
  .bg-danger {
    color: rgb(var(--color-rose)) !important;
    background-color: transparent !important;
    border-color: rgb(var(--color-rose)) !important;
  }
  
  .text-warn,
  .bg-warn {
    color: rgb(var(--color-amber)) !important;
    background-color: transparent !important;
    border-color: rgb(var(--color-amber)) !important;
  }
  
  /* === Icons === */
  
  svg {
    stroke-width: 2.5 !important;
  }
  
  /* === Shadows (Remove) === */
  
  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  /* === Images === */
  
  img {
    border: 2px solid rgb(var(--color-border)) !important;
  }
}

/* === Windows High Contrast Mode === */

@media screen and (-ms-high-contrast: active) {
  /* Use system colors */
  * {
    background-color: Window !important;
    color: WindowText !important;
    border-color: WindowText !important;
  }
  
  a,
  button,
  [role="button"] {
    color: LinkText !important;
  }
  
  a:hover,
  button:hover,
  [role="button"]:hover {
    color: HighlightText !important;
    background-color: Highlight !important;
  }
  
  *:focus-visible {
    outline: 3px solid Highlight !important;
  }
}

/* === Manual High Contrast Toggle === */

[data-contrast="high"] {
  /* Same styles as prefers-contrast: high */
  /* Users can toggle this via Settings */
  
  /* Stronger colors */
  --color-emerald: 0 255 0;
  --color-rose: 255 0 0;
  --color-amber: 255 170 0;
  --color-cyan: 0 255 255;
  --color-bg: 0 0 0;
  --color-bg-elevated: 0 0 0;
  --color-surface: 12 12 12;
  --color-surface-subtle: 18 18 18;
  --color-surface-elevated: 24 24 24;
  --color-surface-hover: 38 38 38;
  
  /* Higher contrast text */
  --color-text-primary: 255 255 255;
  --color-text-secondary: 224 224 224;
  --color-text-tertiary: 204 204 204;
  
  /* Stronger borders */
  --color-border: 255 255 255;
  --color-border-secondary: 204 204 204;
}

[data-contrast="high"] * {
  border-width: 2px !important;
}

[data-contrast="high"] button,
[data-contrast="high"] a,
[data-contrast="high"] input,
[data-contrast="high"] select,
[data-contrast="high"] textarea,
[data-contrast="high"] [role="button"] {
  border: 2px solid rgb(var(--color-border)) !important;
}

[data-contrast="high"] *:focus-visible {
  outline: 3px solid rgb(var(--color-emerald)) !important;
  outline-offset: 2px !important;
}

[data-contrast="high"] body {
  font-weight: 500 !important;
}

[data-contrast="high"] svg {
  stroke-width: 2.5 !important;
}

[data-contrast="high"] * {
  box-shadow: none !important;
  text-shadow: none !important;
}

/**
 * Usage:
 * 
 * // Auto-detect (no code required)
 * // Browser applies styles when user enables high contrast mode
 * 
 * // Manual toggle (future Settings page)
 * document.body.setAttribute('data-contrast', 'high');
 * 
 * // Remove manual toggle
 * document.body.removeAttribute('data-contrast');
 */
